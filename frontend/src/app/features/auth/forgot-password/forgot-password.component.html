<div class="auth-wrap">
  <main class="card">
    <header class="card__header">
      <h1>Forgot password</h1>
      <p class="subtitle">Enter your email and we’ll send you a reset link.</p>
    </header>

    <form
      [formGroup]="form"
      (ngSubmit)="submit()"
      class="form"
      novalidate
      *ngIf="!submitted; else successTpl"
    >
      <div class="field" [class.has-error]="showError('email')">
        <label for="email">Email</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          placeholder="you@example.com"
        />
        <small *ngIf="showError('email')">{{ getError("email") }}</small>
      </div>

      <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>

      <button class="btn" [disabled]="form.invalid || loading">
        <span *ngIf="!loading">Send reset link</span>
        <span *ngIf="loading" class="spinner" aria-hidden="true"></span>
      </button>

      <p class="switch">
        Remembered your password?
        <a class="link" routerLink="/login">Back to sign in</a>
      </p>
    </form>

    <ng-template #successTpl>
      <div class="success">
        <h2>Check your inbox</h2>
        <p>
          If an account exists for <strong>{{ f["email"].value }}</strong
          >, you’ll receive a reset email shortly.
        </p>
        <p class="switch">
          <a class="link" routerLink="/login">Return to sign in</a>
        </p>
      </div>
    </ng-template>
  </main>
</div>
